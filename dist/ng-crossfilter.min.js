/*! ng-crossfilter by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-05-28 */
!function(a,b,c){"use strict";var d=function(a){throw"ngCrossfilter: "+a+"."};"undefined"==typeof a&&d("Angular dependency is a requirement"),"undefined"==typeof b&&d("Crossfilter dependency is a requirement");var e=a.module("ngCrossfilter",[]);e.filter("crossfilter",function(){return function(a){if(console.log("Here"),"undefined"==typeof a._collection)return a;var b=a._sortProperty||a._primaryKey,c=a._sortOrder||"top";return a._dimensions[b][c](1/0)}}),e.service("Crossfilter",function(){var e=function(a,b,c){this._initialise(a,b,c)};return e.prototype={STRATEGIES:{keep:"persistent",clear:"transient"},_collection:{},_dimensions:[],_primaryKey:"",_sortProperty:"",_sortOrder:"top",_lastFilter:"",_strategy:"",_initialise:function(e,f,g){"function"!=typeof c.isArray||c.isArray(e)||d("Collection must be an array"),g=g||this.STRATEGIES.keep,-1===[this.STRATEGIES.keep,this.STRATEGIES.clear].indexOf(g)&&d("Strategy must be either '"+this.STRATEGIES.keep+"' or '"+this.STRATEGIES.clear+"'");var h=this._getProperties(e[0]);this._collection=b(e),this._strategy=g,this._primaryKey=f||h[0],a.forEach(h,function(a){this._dimensions[a]=this._collection.dimension(function(b){return b[a]})}.bind(this))},filterBy:function(a,b,c){if("undefined"!=typeof c&&"function"!=typeof c)throw d("Custom filter method must be a function");return this._lastFilter&&this._strategy===this.STRATEGIES.clear&&(this.unfilterBy(this._lastFilter),this._lastFilter=a),"function"==typeof c?void this._dimensions[a].filterFunction(c):void this._dimensions[a].filter(b)},unfilterBy:function(a){"undefined"==typeof this._dimensions[a]&&d("Unable to find dimension named '"+a+"'"),this._dimensions[a].filterAll()},unfilterAll:function(){a.forEach(this._dimensions,function(a){a.filterAll()})},_getProperties:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}},e})}(window.angular,window.crossfilter,window.Array);