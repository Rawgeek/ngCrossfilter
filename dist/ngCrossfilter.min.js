/*! ng-crossfilter by Adam Timberlake <adam.timberlake@gmail.com> created on 2013-11-24 */
!function(a,b){"use strict";var c=a.module("ngCrossfilter",[]);c.service("crossfilterFilter",function(){var c={},d={},e="",f="afresh",g=function(e){var f=h(e[0]);c=b(e),a.forEach(f,function(a){d[a]=c.dimension(function(b){return b[a]})})},h=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},i=function(b,c,f){"afresh"===f&&e&&d[e].filterAll(),e=b;var g=d[b],h=function(a){return a.substr(1)};if(a.isArray(c))return g.filterRange(c),void 0;switch(String(c).charAt(0)){case"!":n(g,h(c));break;case"?":k(g,h(c));break;case"^":l(g,h(c));break;case"~":o(g,h(c));break;default:m(g,c)}},j=function(){a.forEach(d,function(a){a.filterAll()})},k=function(a,b){var c=new RegExp(b,"i");a.filterFunction(function(a){return String(a).match(c)})},l=function(a,b){var c=new RegExp(b,"i");a.filterFunction(function(a){return!String(a).match(c)})},m=function(a,b){var c=new RegExp(b,"i");a.filterFunction(function(a){return a.match(c)})},n=function(a,b){var c=new RegExp(b,"i");a.filterFunction(function(a){return!a.match(c)})},o=function(a,b){var c=b.match(/\/([a-z])*$/)[1];b=b.match(/^\/(.+?)\/[a-z]*$/i)[1];var d=new RegExp(b,c);a.filterFunction(function(a){return a.match(d)})};return function(b,e){var h=a.copy(b);if(e.filter.value===!1&&j(),"groupAll"in c&&"dimension"in c||g(h),e.filter&&e.filter.value){var k=e.strategy||f;i(e.filter.property,e.filter.value,k)}var l=d[e.sort.property||"id"],m="asc"===(e.sort.value||"asc")?"bottom":"top";return l[m](1/0)}})}(window.angular,window.crossfilter);